// Grabby - Multi-language support
const translations = {
  en: {
    name: "Grabby",
    description: "Smart 3D model file downloader",
    
    // Header
    title: "Grabby",
    settings: "Settings",
    
    // Info banner
    howToUse: "How to use?",
    step1: "3D model files are automatically detected",
    step2: "Count shown in extension icon badge",
    step3: "Click \"Download\" to save with custom name",
    
    // File list
    noFiles: "No files found",
    noFilesDesc: "Files will be scanned when page reloads.",
    download: "Download",
    downloading: "Downloading...",
    downloaded: "Downloaded ✓",
    error: "Error!",
    sizeUnknown: "Unknown",
    
    // Formats section
    supportedFormats: "Supported Formats:",
    
    // Settings modal
    formatSettings: "Format Settings",
    activeFormats: "Active Formats:",
    delete: "Delete",
    addFormatPlaceholder: ".extension (e.g. .spz)",
    add: "Add",
    settingsSaved: "Settings saved!",
    
    // Language settings
    languageSettings: "Language Settings",
    selectLanguage: "Select Language:",
    
    // Alerts
    invalidFormat: "Please enter a valid format (e.g. .spz)",
    formatExists: "This format already exists!",
    minOneFormat: "At least one format is required!"
  },
  
  tr: {
    name: "Grabby",
    description: "Akıllı 3D model dosya indiricisi",
    
    title: "Grabby",
    settings: "Ayarlar",
    
    howToUse: "Nasıl kullanılır?",
    step1: "3D model dosyaları otomatik algılanır",
    step2: "Algılanan dosya sayısı simgede gösterilir",
    step3: "\"İndir\" butonuna tıklayarak özel adla kaydedin",
    
    noFiles: "Dosya bulunamadı",
    noFilesDesc: "Sayfa yenilendiğinde dosyalar tekrar taranacaktır.",
    download: "İndir",
    downloading: "İndiriliyor...",
    downloaded: "İndirildi ✓",
    error: "Hata!",
    sizeUnknown: "Bilinmiyor",
    
    supportedFormats: "Desteklenen Formatlar:",
    
    formatSettings: "Format Ayarları",
    activeFormats: "Aktif Formatlar:",
    delete: "Sil",
    addFormatPlaceholder: ".uzantı (örn: .spz)",
    add: "Ekle",
    settingsSaved: "Ayarlar kaydedildi!",
    
    languageSettings: "Dil Ayarları",
    selectLanguage: "Dil Seçin:",
    
    invalidFormat: "Lütfen geçerli bir format girin (örn: .spz)",
    formatExists: "Bu format zaten mevcut!",
    minOneFormat: "En az bir format gerekli!"
  },
  
  es: {
    name: "Grabby",
    description: "Descargador inteligente de archivos de modelos 3D",
    
    title: "Grabby",
    settings: "Configuración",
    
    howToUse: "¿Cómo usar?",
    step1: "Los archivos de modelos 3D se detectan automáticamente",
    step2: "El conteo se muestra en la insignia del icono de extensión",
    step3: "Haga clic en \"Descargar\" para guardar con nombre personalizado",
    
    noFiles: "No se encontraron archivos",
    noFilesDesc: "Los archivos se escanearán cuando se recargue la página.",
    download: "Descargar",
    downloading: "Descargando...",
    downloaded: "Descargado ✓",
    error: "¡Error!",
    sizeUnknown: "Desconocido",
    
    supportedFormats: "Formatos Compatibles:",
    
    formatSettings: "Configuración de Formatos",
    activeFormats: "Formatos Activos:",
    delete: "Eliminar",
    addFormatPlaceholder: ".extensión (ej: .spz)",
    add: "Agregar",
    settingsSaved: "¡Configuración guardada!",
    
    languageSettings: "Configuración de Idioma",
    selectLanguage: "Seleccionar Idioma:",
    
    invalidFormat: "Por favor ingrese un formato válido (ej: .spz)",
    formatExists: "¡Este formato ya existe!",
    minOneFormat: "¡Se requiere al menos un formato!"
  },
  
  fr: {
    name: "Grabby",
    description: "Téléchargeur intelligent de fichiers de modèles 3D",
    
    title: "Grabby",
    settings: "Paramètres",
    
    howToUse: "Comment utiliser?",
    step1: "Les fichiers de modèles 3D sont détectés automatiquement",
    step2: "Le nombre est affiché dans le badge de l'icône d'extension",
    step3: "Cliquez sur \"Télécharger\" pour enregistrer avec un nom personnalisé",
    
    noFiles: "Aucun fichier trouvé",
    noFilesDesc: "Les fichiers seront analysés lors du rechargement de la page.",
    download: "Télécharger",
    downloading: "Téléchargement...",
    downloaded: "Téléchargé ✓",
    error: "Erreur!",
    sizeUnknown: "Inconnu",
    
    supportedFormats: "Formats Supportés:",
    
    formatSettings: "Paramètres de Format",
    activeFormats: "Formats Actifs:",
    delete: "Supprimer",
    addFormatPlaceholder: ".extension (ex: .spz)",
    add: "Ajouter",
    settingsSaved: "Paramètres enregistrés!",
    
    languageSettings: "Paramètres de Langue",
    selectLanguage: "Sélectionner la Langue:",
    
    invalidFormat: "Veuillez entrer un format valide (ex: .spz)",
    formatExists: "Ce format existe déjà!",
    minOneFormat: "Au moins un format est requis!"
  },
  
  de: {
    name: "Grabby",
    description: "Intelligenter 3D-Modelldatei-Downloader",
    
    title: "Grabby",
    settings: "Einstellungen",
    
    howToUse: "Wie benutzt man?",
    step1: "3D-Modelldateien werden automatisch erkannt",
    step2: "Anzahl im Erweiterungs-Icon-Badge angezeigt",
    step3: "Klicken Sie auf \"Herunterladen\", um mit benutzerdefiniertem Namen zu speichern",
    
    noFiles: "Keine Dateien gefunden",
    noFilesDesc: "Dateien werden beim Neuladen der Seite gescannt.",
    download: "Herunterladen",
    downloading: "Wird heruntergeladen...",
    downloaded: "Heruntergeladen ✓",
    error: "Fehler!",
    sizeUnknown: "Unbekannt",
    
    supportedFormats: "Unterstützte Formate:",
    
    formatSettings: "Format-Einstellungen",
    activeFormats: "Aktive Formate:",
    delete: "Löschen",
    addFormatPlaceholder: ".erweiterung (z.B. .spz)",
    add: "Hinzufügen",
    settingsSaved: "Einstellungen gespeichert!",
    
    languageSettings: "Spracheinstellungen",
    selectLanguage: "Sprache Wählen:",
    
    invalidFormat: "Bitte geben Sie ein gültiges Format ein (z.B. .spz)",
    formatExists: "Dieses Format existiert bereits!",
    minOneFormat: "Mindestens ein Format ist erforderlich!"
  },
  
  zh: {
    name: "Grabby",
    description: "智能3D模型文件下载器",
    
    title: "Grabby",
    settings: "设置",
    
    howToUse: "如何使用？",
    step1: "自动检测3D模型文件",
    step2: "扩展图标徽章显示计数",
    step3: "点击\"下载\"以自定义名称保存",
    
    noFiles: "未找到文件",
    noFilesDesc: "页面重新加载时将扫描文件。",
    download: "下载",
    downloading: "正在下载...",
    downloaded: "已下载 ✓",
    error: "错误！",
    sizeUnknown: "未知",
    
    supportedFormats: "支持的格式：",
    
    formatSettings: "格式设置",
    activeFormats: "活动格式：",
    delete: "删除",
    addFormatPlaceholder: ".扩展名（例如：.spz）",
    add: "添加",
    settingsSaved: "设置已保存！",
    
    languageSettings: "语言设置",
    selectLanguage: "选择语言：",
    
    invalidFormat: "请输入有效格式（例如：.spz）",
    formatExists: "此格式已存在！",
    minOneFormat: "至少需要一种格式！"
  },
  
  ja: {
    name: "Grabby",
    description: "スマート3Dモデルファイルダウンローダー",
    
    title: "Grabby",
    settings: "設定",
    
    howToUse: "使い方は？",
    step1: "3Dモデルファイルが自動的に検出されます",
    step2: "拡張機能アイコンバッジにカウントが表示されます",
    step3: "\"ダウンロード\"をクリックしてカスタム名で保存",
    
    noFiles: "ファイルが見つかりません",
    noFilesDesc: "ページの再読み込み時にファイルがスキャンされます。",
    download: "ダウンロード",
    downloading: "ダウンロード中...",
    downloaded: "ダウンロード済み ✓",
    error: "エラー！",
    sizeUnknown: "不明",
    
    supportedFormats: "対応フォーマット：",
    
    formatSettings: "フォーマット設定",
    activeFormats: "アクティブなフォーマット：",
    delete: "削除",
    addFormatPlaceholder: ".拡張子（例：.spz）",
    add: "追加",
    settingsSaved: "設定が保存されました！",
    
    languageSettings: "言語設定",
    selectLanguage: "言語を選択：",
    
    invalidFormat: "有効なフォーマットを入力してください（例：.spz）",
    formatExists: "このフォーマットは既に存在します！",
    minOneFormat: "少なくとも1つのフォーマットが必要です！"
  },
  
  ru: {
    name: "Grabby",
    description: "Умный загрузчик файлов 3D-моделей",
    
    title: "Grabby",
    settings: "Настройки",
    
    howToUse: "Как использовать?",
    step1: "Файлы 3D-моделей обнаруживаются автоматически",
    step2: "Количество отображается в значке расширения",
    step3: "Нажмите \"Скачать\", чтобы сохранить с пользовательским именем",
    
    noFiles: "Файлы не найдены",
    noFilesDesc: "Файлы будут просканированы при перезагрузке страницы.",
    download: "Скачать",
    downloading: "Загрузка...",
    downloaded: "Загружено ✓",
    error: "Ошибка!",
    sizeUnknown: "Неизвестно",
    
    supportedFormats: "Поддерживаемые Форматы:",
    
    formatSettings: "Настройки Формата",
    activeFormats: "Активные Форматы:",
    delete: "Удалить",
    addFormatPlaceholder: ".расширение (напр: .spz)",
    add: "Добавить",
    settingsSaved: "Настройки сохранены!",
    
    languageSettings: "Настройки Языка",
    selectLanguage: "Выбрать Язык:",
    
    invalidFormat: "Пожалуйста, введите действительный формат (напр: .spz)",
    formatExists: "Этот формат уже существует!",
    minOneFormat: "Требуется хотя бы один формат!"
  },
  
  pt: {
    name: "Grabby",
    description: "Baixador inteligente de arquivos de modelos 3D",
    
    title: "Grabby",
    settings: "Configurações",
    
    howToUse: "Como usar?",
    step1: "Arquivos de modelos 3D são detectados automaticamente",
    step2: "A contagem é mostrada no emblema do ícone da extensão",
    step3: "Clique em \"Baixar\" para salvar com nome personalizado",
    
    noFiles: "Nenhum arquivo encontrado",
    noFilesDesc: "Os arquivos serão verificados quando a página for recarregada.",
    download: "Baixar",
    downloading: "Baixando...",
    downloaded: "Baixado ✓",
    error: "Erro!",
    sizeUnknown: "Desconhecido",
    
    supportedFormats: "Formatos Suportados:",
    
    formatSettings: "Configurações de Formato",
    activeFormats: "Formatos Ativos:",
    delete: "Excluir",
    addFormatPlaceholder: ".extensão (ex: .spz)",
    add: "Adicionar",
    settingsSaved: "Configurações salvas!",
    
    languageSettings: "Configurações de Idioma",
    selectLanguage: "Selecionar Idioma:",
    
    invalidFormat: "Por favor, insira um formato válido (ex: .spz)",
    formatExists: "Este formato já existe!",
    minOneFormat: "Pelo menos um formato é necessário!"
  },
  
  ar: {
    name: "Grabby",
    description: "محمل ملفات نماذج ثلاثية الأبعاد ذكي",
    
    title: "Grabby",
    settings: "الإعدادات",
    
    howToUse: "كيفية الاستخدام؟",
    step1: "يتم اكتشاف ملفات النماذج ثلاثية الأبعاد تلقائيًا",
    step2: "يظهر العدد في شارة أيقونة الامتداد",
    step3: "انقر فوق \"تنزيل\" للحفظ باسم مخصص",
    
    noFiles: "لم يتم العثور على ملفات",
    noFilesDesc: "سيتم فحص الملفات عند إعادة تحميل الصفحة.",
    download: "تنزيل",
    downloading: "جارٍ التنزيل...",
    downloaded: "تم التنزيل ✓",
    error: "خطأ!",
    sizeUnknown: "غير معروف",
    
    supportedFormats: "التنسيقات المدعومة:",
    
    formatSettings: "إعدادات التنسيق",
    activeFormats: "التنسيقات النشطة:",
    delete: "حذف",
    addFormatPlaceholder: ".امتداد (مثال: .spz)",
    add: "إضافة",
    settingsSaved: "تم حفظ الإعدادات!",
    
    languageSettings: "إعدادات اللغة",
    selectLanguage: "اختر اللغة:",
    
    invalidFormat: "الرجاء إدخال تنسيق صالح (مثال: .spz)",
    formatExists: "هذا التنسيق موجود بالفعل!",
    minOneFormat: "مطلوب تنسيق واحد على الأقل!"
  }
};

// Language names for display
const languageNames = {
  en: "English",
  tr: "Türkçe",
  es: "Español",
  fr: "Français",
  de: "Deutsch",
  zh: "中文",
  ja: "日本語",
  ru: "Русский",
  pt: "Português",
  ar: "العربية"
};

// Current language (default: English)
let currentLang = 'en';

// Initialize language from storage
chrome.storage.sync.get('language', ({ language }) => {
  if (language && translations[language]) {
    currentLang = language;
  }
});

// Get translation
function t(key) {
  return translations[currentLang]?.[key] || translations['en'][key] || key;
}

// Get current language
function getCurrentLanguage() {
  return currentLang;
}

// Set language
function setLanguage(lang) {
  if (translations[lang]) {
    currentLang = lang;
    chrome.storage.sync.set({ language: lang });
    return true;
  }
  return false;
}

// Get all available languages
function getAvailableLanguages() {
  return Object.keys(translations).map(code => ({
    code,
    name: languageNames[code]
  }));
}

// Export for use in other files
if (typeof module !== 'undefined' && module.exports) {
  module.exports = { t, getCurrentLanguage, setLanguage, getAvailableLanguages, languageNames };
}
